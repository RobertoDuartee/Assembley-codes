.INCLUDE "M16DEF.INC"
.ORG 0
.DEF BIN_LSB,R22
.DEF BIN_MSB,R23

LDI R16,HIGH(RAMEND)
OUT SPH,R16
LDI R16,LOW(RAMEND)
OUT SPL,R16

CALL BIN_BCD

BIN_BCD:
CLR R16
STS 0X60,R16
STS 0X61,R16
STS 0X62,R16
STS 0X63,R16

otro:
CPI BIN_LSB,0
BRNE INC_BCD
CPI BIN_MSB,0
BRNE INC_BCD
RET

INC_BCD:
LDI R17,0
LDI YL,0X63
LDI YH,0

ciclo:
LD R20,Y
INC R20
ST Y,R20
CPI R20,10
BRNE DEC_BIN
ST Y,R17
DEC YL
CPI YL,0X5F
BRNE ciclo

DEC_BIN:
DEC BIN_LSB
CPI BIN_LSB,0XFF
BRNE otro
DEC BIN_MSB
RJMP otro



;---------------8 BITS, 3DIGITOS----------------
.INCLUDE "M16DEF.INC"
.ORG 0
.DEF BIN,R22


LDI R16,HIGH(RAMEND)
OUT SPH,R16
LDI R16,LOW(RAMEND)
OUT SPL,R16

CALL BIN_BCD

BIN_BCD:
CLR R16
STS 0X60,R16
STS 0X61,R16
STS 0X62,R16


otro:
CPI BIN,0
BRNE INC_BCD
RET

INC_BCD:
LDI R17,0
LDI YL,0X62
LDI YH,0

ciclo:
LD R20,Y
INC R20
ST Y,R20
CPI R20,10
BRNE DEC_BIN
ST Y,R17
DEC YL
CPI YL,0X5F
BRNE ciclo

DEC_BIN:
DEC BIN
CPI BIN,0XFF
BRNE otro
RET


;--------------24 BITS,6 DISPLAYS------------------
.INCLUDE "M16DEF.INC"
.ORG 0
.DEF BIN_LSB,R22
.DEF BIN_MSB,R23
.DEF BIN_HSB,R24

LDI R16,HIGH(RAMEND)
OUT SPH,R16
LDI R16,LOW(RAMEND)
OUT SPL,R16

CALL BIN_BCD

BIN_BCD:
CLR R16
STS 0X60,R16
STS 0X61,R16
STS 0X62,R16
STS 0X63,R16
STS 0X64,R16
STS 0X65,R16

otro:
CPI BIN_LSB,0
BRNE INC_BCD
CPI BIN_MSB,0
BRNE INC_BCD
CPI BIN_HSB,0
BRNE INC_BCD
RET

INC_BCD:
LDI R17,0
LDI YL,0X65
LDI YH,0

ciclo:
LD R20,Y
INC R20
ST Y,R20
CPI R20,10
BRNE DEC_BIN
ST Y,R17
DEC YL
CPI YL,0X5F
BRNE ciclo

DEC_BIN:
DEC BIN_LSB
CPI BIN_LSB,0XFF
BRNE otro
DEC BIN_MSB
CPI BIN_MSB,0XFF
BRNE otro
DEC BIN_HSB
RJMP otro

